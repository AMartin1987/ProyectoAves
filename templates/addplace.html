{% extends "layout.html" %}

{% block navbar %}
<li><a href="{{ url_for('index') }}" class="nav-link px-2 text-secondary">Inicio</a></li>
<li><a href="{{ url_for('addbird') }}" class="nav-link px-2 text-white">Reportar un ave</a></li>
<li><a href="{{ url_for('addplace') }}" class="nav-link px-2 text-white">Ofrecer un refugio</a></li>            
<li><a href="{{ url_for('search') }}" class="nav-link px-2 text-white">Buscar aves o refugios</a></li>
{% endblock %}

{% block head %}
  <title>Ofrecer un refugio</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&key=AIzaSyAqoKvZMX0sWGNCDPWKYyBvLNkkPrV6KvE"></script>
  
{% endblock %}

{% block bg_image %}
<div class="bg-image" 
style="background-image: url('static/images/torcacitabg.jpg');
    height: 100vh; background-size: cover; width: 100%; position:absolute">
</div>
{% endblock %}

{% block content %}
<div class="container-fluid d-flex" style="margin:none;">
  <div class="row">
    <div class="col-6">
        <div class="card">
          <div class="card-body">
            <form method='POST' action="">
              {{ form.hidden_tag() }}
              <div class="form-group">
                <div class="mb-3">
                {{ form.lugar.label }} <br>
                {{ form.lugar }}
                </div>
                <div class="mb-3">
                  {{ form.localiz.label }}
                  {{ form.localiz }}
                </div>    
                <div>
                  {{ form.loc_lat }}
                  {{ form.loc_long }}
                </div>
              
                <script>
                var searchInput = 'localiz';
          
                $(document).ready(function () {
                    var autocomplete;
                    autocomplete = new google.maps.places.Autocomplete((document.getElementById(searchInput)), {
                        types: ['geocode'],
                    });
                        
                    google.maps.event.addListener(autocomplete, 'place_changed', function () {
                        var near_place = autocomplete.getPlace();
                        document.getElementById('loc_lat').value = near_place.geometry.location.lat();
                        document.getElementById('loc_long').value = near_place.geometry.location.lng();
                    });
                });
                </script>
              
                <div class="mb-3">
                  {{ form.especie.label }}
                  {{ form.especie }}
                </div>
                <div class="mb-3">
                  {{ form.contacto.label }}
                  {{ form.contacto }}
                </div>
                <div class="mb-3">
                  {{ form.submit }}
                </div>
              </div> 
            </form>
         </div>
       </div>
    </div>
    <div class="col-6 d-flex align-items-center" style="z-index:10; color:rgb(231, 231, 231); text-align: end;">
      <h1>Ofrecé un refugio temporal o permanente para un ave caída.</h1>
    </div>
  </div>
</div>
{% endblock %}    