{% extends "layout.html" %}

{% block head %}
  <title>Reportar un ave</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&key=AIzaSyAqoKvZMX0sWGNCDPWKYyBvLNkkPrV6KvE"></script>

{% endblock %}

{% block content %}
<div class="container-fluid d-flex" style="margin:none;">
  <div class="bg-image" 
  style="background-image: url('static/aves-1.jpg');
      height: 100vh; background-size: cover; width: 100%; position:absolute">
  </div>
  <div class="row align-items-center">
    <div class="col-5">
      <div class="card">
        <div class="card-body">
          <form method='POST' action="" enctype="multipart/form-data">
          {{ form.hidden_tag() }}
            <fieldset class="form-group"> 
            <h1>Registra un ave caída</h1>
            <div class="form-group">
              <div class="mb-3">
                {{ form.especie.label }}
                {{ form.especie }}
              </div>
              <div class="mb-3">
                {{ form.espEsp.label }}
                {{ form.espEsp }}
              </div>
              <div class="mb-3">
                {{ form.edad.label }}
                {{ form.edad }}
              </div>
              <div class="mb-3">
                {{ form.salud.label }}
                {{ form.salud }}
              </div>
              <div class="mb-3">
                {{ form.localiz.label }}
                {{ form.localiz }}
              <div class="form-group">
                {{ form.loc_lat }}
                {{ form.loc_long }}
              </div>

              </div>

              <script>
              var searchInput = 'localiz';

              $(document).ready(function () {
                  var autocomplete;
                  autocomplete = new google.maps.places.Autocomplete((document.getElementById(searchInput)), {
                      types: ['geocode'],
                  });
                      
                  google.maps.event.addListener(autocomplete, 'place_changed', function () {
                      var near_place = autocomplete.getPlace();
                      document.getElementById('loc_lat').value = near_place.geometry.location.lat();
                      document.getElementById('loc_long').value = near_place.geometry.location.lng();
                              
                      document.getElementById('latitude_view').innerHTML = near_place.geometry.location.lat();
                      document.getElementById('longitude_view').innerHTML = near_place.geometry.location.lng();
                  });
              });
              </script>
              <div class="mb-3">
                {{ form.lugar.label }} <br>
                {% for subfield in form.lugar %}
                  {{ subfield }}
                  {{ subfield.label }}
                {% endfor %}
              </div>  
              <div class="mb-3">
                {{ form.requer.label }}
                {{ form.requer }}
              </div>
              <div class="mb-3">
                {{ form.contacto.label }}
                {{ form.contacto }}
              </div>
              <div class="mb-3">
              <h1>File Upload</h1>
                {{ form.imagen }}
              </div>  
          </form>
        </div>
              <div>
                {{ form.submit }}
              </div>
      </div>
    </div>
      <div class="col-7 d-flex align-items-center" style="z-index:10; color:rgb(231, 231, 231); text-align: end;">
        <h1>Reportá un ave caída para que otras personas le den un lugar de tránsito o un hogar permanente.</h1>
      </div>
  </div>
</div>
  {% endblock %}